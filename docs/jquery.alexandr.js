(()=>{"use strict";const t=function(t,i){this.item=$("<div>",{class:"alexandr__line ".concat(i)}),t.append(this.item)},i=function(t,i,e){this.wrap=$("<div>").attr({class:"alexandr__values"}),this.min=$("<span>").attr({class:"alexandr__value--min ".concat(i)}),this.max=$("<span>").attr({class:"alexandr__value--max ".concat(e)}),this.wrap.append(this.min,this.max),t.prepend(this.wrap)},e=function(t,i){this.item=$("<span>",{class:"alexandr__progressbar ".concat(i)}),t.append(this.item)},n=function(t){this.countDivivdings=4,this.item=$("<div>",{class:"alexandr__ruler"}),this.dividings=new Array(this.countDivivdings);for(var i=0;i<this.countDivivdings;i++)this.dividings[i]=$("<a>",{class:"alexandr__dividing",href:"#"}),this.item.append(this.dividings[i]);t.append(this.item)},s=function(t){this.item=$("<span>",{class:"alexandr__thumb"}),t.append(this.item)},a=function(){function a(){this.slider=$("<div>",{class:"alexandr"}),this.thumbs=[]}return a.prototype.init=function(a){var o=a.type,h=a.container,l=a.lineClass,u=a.thumbMinClass,r=a.thumbMaxClass,d=a.thumbClass,m=a.orientation,p=a.showMinMaxValue,c=a.showMinValueClass,x=a.showMaxValueClass,v=a.showRuler,f=a.showValueFlag,b=a.progressBarClass,g=a.controlsMinThumb,V=a.controlsMaxThumb,P=a.controlsStepValues;if("DIV"!==h[0].nodeName&&"ARTICLE"!==h[0].nodeName)throw new Error("В качестве контенера может быть передан только div или article");if(this.container=h,this.type=o,this.line=new t(this.slider,l),this.orientation=m,this.moveDirection="vertical"===this.orientation?"top":"left",this.showMinMaxValue=p,this.showRuler=v,this.showValueFlag=f,this.progressbar=new e(this.line.item,b),this.controlsMinThumb=g,this.controlsMaxThumb=V,this.controlsStepValues=P,"double"===this.type){var _=new s(this.line.item);_.item.addClass("alexandr__thumb--min ".concat(u));var M=new s(this.line.item);M.item.addClass("alexandr__thumb--max ".concat(r)),this.thumbs.push(_,M)}else{var w=new s(this.line.item);w.item.addClass(d),this.thumbs.push(w)}this.container.append(this.slider),this.sliderLength=this.slider.outerWidth()-this.thumbs[0].item.outerWidth(),this.showMinMaxValue&&(this.sliderMinMaxValueLine=new i(this.slider,c,x)),this.showRuler&&(this.ruler=new n(this.slider)),this.showValueFlag&&$.each(this.thumbs,(function(){this.item.addClass("flag")})),"vertical"===this.orientation&&this._setVerticalOrientation()},a.prototype.bindThumbsMove=function(t){var i=this;this.thumbs.forEach((function(e){e.item[0].addEventListener("pointerdown",(function(e){return i._handlerThumbsMove(e,t)}))}))},a.prototype.bindInputsChange=function(t){var i=this;this.controlsMinThumb.length&&$.each(this.controlsMinThumb,(function(e,n){$.each(n,(function(e,n){n.addEventListener("change",(function(e){return i._handlerInputsChange(e,t,"min")}))}))})),this.controlsMaxThumb.length&&$.each(this.controlsMaxThumb,(function(e,n){$.each(n,(function(e,n){n.addEventListener("change",(function(e){return i._handlerInputsChange(e,t,"max")}))}))}))},a.prototype.bindLineClick=function(t){var i=this;this.line.item[0].addEventListener("click",(function(e){i._handleSliderClick(e,t)}))},a.prototype.bindRulerClick=function(t){var i=this;this.showRuler&&this.ruler.item[0].addEventListener("click",(function(e){i._handleSliderClick(e,t)}))},a.prototype.updateThumbsPosition=function(t,i){var e,n;"min"===t?(this.minThumbPixelPosition=i,this.thumbs[0].item.css(((e={})[this.moveDirection]=i,e))):"double"===this.type&&"max"===t&&(this.maxThumbPixelPosition=i,this.thumbs[1].item.css(((n={})[this.moveDirection]=i,n))),this._setProgressBar()},a.prototype.updateMinMaxValueLine=function(t,i){this.sliderMinMaxValueLine&&(this.sliderMinMaxValueLine.min.text(t),this.sliderMinMaxValueLine.max.text(i))},a.prototype.updateRulerValue=function(t,i){if(this.showRuler){var e=(i-t)/(this.ruler.dividings.length-1);$.each(this.ruler.dividings,(function(){this.attr("data-dividing",Math.round(t)),t+=e}))}},a.prototype.updateFlagValues=function(t,i){this.showValueFlag&&("min"===t?this.thumbs[0].item.attr("data-value",i):"double"===this.type&&"max"===t&&this.thumbs[1].item.attr("data-value",i))},a.prototype.updateInputsValue=function(t,i){"min"===t&&this.controlsMinThumb.length&&$.each(this.controlsMinThumb,(function(){$.each(this,(function(){$(this).val(i)}))})),"max"===t&&this.controlsMaxThumb.length&&$.each(this.controlsMaxThumb,(function(){$.each(this,(function(){$(this).val(i)}))}))},a.prototype.updateStepInputs=function(t){this.controlsStepValues.length&&$.each(this.controlsStepValues,(function(){$.each(this,(function(){$(this).val(t)}))}))},a.prototype.setPixelInOneStep=function(t){var i=t.min,e=t.max,n=t.step;this.pixelInOneStep=this.sliderLength/(e-i)*n||1},a.prototype._handlerThumbsMove=function(t,i){var e=this;t.preventDefault();var n=this._getCoords(this.line.item),s=$(t.target),a=this._getCoords(s),o=this._getShiftThumb({event:t,currentThumbCoords:a,orientation:this.orientation}),h=function(t){var h={event:t,shiftClickThumb:o,sliderLineCoords:n,currentThumbCoords:a},l=e._getNewThumbCord(h);"double"===e.type&&(l=e._validateDoubleThumbValue({currenThumb:s,value:l,minThumbPixelPosition:e.minThumbPixelPosition,maxThumbPixelPosition:e.maxThumbPixelPosition,pixelInOneStep:e.pixelInOneStep})),s.prop("classList").contains("alexandr__thumb--max")?i("max",l):i("min",l)};document.addEventListener("pointermove",h),document.addEventListener("pointerup",(function t(){document.removeEventListener("pointerup",t),document.removeEventListener("pointermove",h)}))},a.prototype._handleSliderClick=function(t,i){var e=t.target;if(!(e instanceof HTMLElement&&e.classList.contains("alexandr__thumb"))){var n=this._getCoords(this.line.item),s="left"===this.moveDirection?t.pageX-n.left:t.pageY-n.top,a=this._equateValueToStep(s);"single"===this.type&&i("min",a),"double"===this.type&&i(a<this.minThumbPixelPosition+(this.maxThumbPixelPosition-this.minThumbPixelPosition)/2?"min":"max",a)}},a.prototype._handlerInputsChange=function(t,i,e){var n=$(t.target),s=parseInt(n.val().toString());i(e,s=Number.isNaN(s)?0:s)},a.prototype._getCoords=function(t){var i=t.offset().left,e=i+t.outerWidth(),n=t.offset().top,s=n+t.outerHeight();return{left:i+window.scrollX,width:e-i,top:n+window.scrollY,height:s-n}},a.prototype._getShiftThumb=function(t){var i=t.event,e=t.currentThumbCoords;return"vertical"===t.orientation?i.pageY-e.top:i.pageX-e.left},a.prototype._getNewThumbCord=function(t){var i,e,n,s,a=t.event,o=t.shiftClickThumb,h=t.sliderLineCoords,l=t.currentThumbCoords;"vertical"===this.orientation?(i=a.pageY,e=h.top,n=h.height,s=l.height):(i=a.pageX,e=h.left,n=h.width,s=l.width);var u=i-o-e;(u=this._equateValueToStep(u))<0&&(u=0);var r=n-s;return u>r&&(u=r),u},a.prototype._equateValueToStep=function(t){if(isNaN(t))throw new Error("Получено NaN");return Math.round(t/this.pixelInOneStep)*this.pixelInOneStep},a.prototype._validateDoubleThumbValue=function(t){var i=t.currenThumb,e=t.value,n=t.minThumbPixelPosition,s=t.maxThumbPixelPosition,a=t.pixelInOneStep;return i.hasClass("alexandr__thumb--min")&&e>=s-a?s-a:i.hasClass("alexandr__thumb--max")&&e<=n+a?this.minThumbPixelPosition+this.pixelInOneStep:e},a.prototype._setProgressBar=function(){if("single"===this.type){if("vertical"===this.orientation){var t=this.minThumbPixelPosition+this.thumbs[0].item.outerHeight()/2+"px";this.progressbar.item.css({top:0,width:"100%",height:t})}"horizontal"===this.orientation&&(t=this.minThumbPixelPosition+this.thumbs[0].item.outerWidth()/2+"px",this.progressbar.item.css({left:0,height:"100%",width:t}))}if("double"===this.type){if("vertical"===this.orientation){var i=this.minThumbPixelPosition+this.thumbs[0].item.outerHeight()/2,e=this.maxThumbPixelPosition+this.thumbs[1].item.outerHeight()/2;this.progressbar.item.css({left:0,height:e-i+"px",width:"100%",top:i})}"horizontal"===this.orientation&&(i=this.minThumbPixelPosition+this.thumbs[0].item.outerWidth()/2,e=this.maxThumbPixelPosition+this.thumbs[1].item.outerWidth()/2,this.progressbar.item.css({left:i+"px",height:"100%",width:e-i+"px"}))}},a.prototype._setVerticalOrientation=function(){var t=this.slider.outerWidth();this.slider.addClass("alexandr--vertical"),this.slider.height(t),this.line.item.addClass("alexandr__line--vertical"),this.line.item.height(t),this.sliderMinMaxValueLine&&(this.sliderMinMaxValueLine.wrap.addClass("alexandr__values--vertical"),this.sliderMinMaxValueLine.wrap.height(t)),this.thumbs.forEach((function(t){t.item.addClass("alexandr__thumb--vertical")})),this.ruler&&(this.ruler.item.addClass("alexandr__ruler--vertical"),this.ruler.dividings.forEach((function(t){t.addClass("alexandr__dividing--vertical")})))},a}();var o=function(){return o=Object.assign||function(t){for(var i,e=1,n=arguments.length;e<n;e++)for(var s in i=arguments[e])Object.prototype.hasOwnProperty.call(i,s)&&(t[s]=i[s]);return t},o.apply(this,arguments)};const h=function(){function t(t,i){var e=this;this.onThumbsPositionChanged=function(t,i){e.view.updateThumbsPosition(t,e._convertUnitsToPixels(i)),e.view.updateFlagValues(t,i),e.view.updateInputsValue(t,i)},this.onStepValueChenged=function(t,i,n){e.view.setPixelInOneStep({min:t,max:i,step:n}),e.view.updateStepInputs(n)},this.onMinMaxValuesChanged=function(t,i){e.view.updateMinMaxValueLine(t,i),e.view.updateRulerValue(t,i)},this.handleThumbsPositionChanged=function(t,i){"min"===t?e.model.setMinPosition(e._convertPixelToUnits(i)):"max"===t&&e.model.setMaxPosition(e._convertPixelToUnits(i))},this.handleInputsChange=function(t,i){"min"===t?e.model.setMinPosition(i):"max"===t&&e.model.setMaxPosition(i)},this.view=t,this.model=i}return t.prototype.init=function(t){this.view.init(o({},t));var i=this.model.init(o({},t));return this.view.setPixelInOneStep({min:this.model.minValue,max:this.model.maxValue,step:this.model.stepValue}),this.model.bindThumbsPositionChanged(this.onThumbsPositionChanged),this.model.bindStepValueChanged(this.onStepValueChenged),this.model.bindMinMaxValuesChanged(this.onMinMaxValuesChanged),this.view.updateThumbsPosition("min",this._convertUnitsToPixels(this.model.minPosition)),this.view.updateThumbsPosition("max",this._convertUnitsToPixels(this.model.maxPosition)),this.view.updateFlagValues("min",this.model.minPosition),this.view.updateFlagValues("max",this.model.maxPosition),this.view.updateInputsValue("max",this.model.maxPosition),this.view.updateInputsValue("min",this.model.minPosition),this.view.updateMinMaxValueLine(this.model.minValue,this.model.maxValue),this.view.updateRulerValue(this.model.minValue,this.model.maxValue),this.view.updateStepInputs(this.model.stepValue),this.view.bindThumbsMove(this.handleThumbsPositionChanged),this.view.bindLineClick(this.handleThumbsPositionChanged),this.view.bindRulerClick(this.handleThumbsPositionChanged),this.view.bindInputsChange(this.handleInputsChange),i},t.prototype._convertUnitsToPixels=function(t){return(t-this.model.minValue)*(this.view.pixelInOneStep/this.model.stepValue)},t.prototype._convertPixelToUnits=function(t){return Math.round(t/this.view.pixelInOneStep*this.model.stepValue+this.model.minValue)},t}(),l=function(){function t(){}return t.prototype.init=function(t){var i=t.minValue,e=t.maxValue,n=t.minPosition,s=t.maxPosition,a=t.stepValue,o=t.type;return this.type=o,this._setMaxValue(+e),this._setMinValue(+i),this._setStepValue(+a),this._setMaxValue(+e),this.setMinPosition(+n),"double"===this.type&&this.setMaxPosition(+s),{minValue:this.minValue,maxValue:this.maxValue,minPosition:this.minPosition,maxPosition:this.maxPosition,stepValue:this.stepValue}},t.prototype.setMinPosition=function(t){var i,e=this._equateValueToStep(t);e=this._validatePosition(e),"double"===this.type&&(e=this._validateDoublePosition("min",e)),this.minPosition=e,null===(i=this.onThumbsPositionChanged)||void 0===i||i.call(this,"min",this.minPosition)},t.prototype.setMaxPosition=function(t){var i,e=this._equateValueToStep(t);e=this._validatePosition(e),"double"===this.type&&(e=this._validateDoublePosition("max",e)),this.maxPosition=e,null===(i=this.onThumbsPositionChanged)||void 0===i||i.call(this,"max",this.maxPosition)},t.prototype.bindThumbsPositionChanged=function(t){this.onThumbsPositionChanged=t},t.prototype.bindStepValueChanged=function(t){this.onStepValueChenged=t},t.prototype.bindMinMaxValuesChanged=function(t){this.onMinMaxValuesChanged=t},t.prototype._setMinValue=function(t){var i,e;this.minValue=t||0,null===(i=this.onMinMaxValuesChanged)||void 0===i||i.call(this,this.minValue,this.maxValue),null===(e=this.onStepValueChenged)||void 0===e||e.call(this,this.minValue,this.maxValue,this.stepValue)},t.prototype._setMaxValue=function(t){var i,e;this.maxValue=t<=this.minValue||Number.isNaN(t)?this.minValue+this.stepValue:t,null===(i=this.onMinMaxValuesChanged)||void 0===i||i.call(this,this.minValue,this.maxValue),null===(e=this.onStepValueChenged)||void 0===e||e.call(this,this.minValue,this.maxValue,this.stepValue)},t.prototype._setStepValue=function(t){var i,e=t<=0,n=t>=this.maxValue,s=Number.isNaN(t);this.stepValue=e||s||n?1:t,null===(i=this.onStepValueChenged)||void 0===i||i.call(this,this.minValue,this.maxValue,this.stepValue)},t.prototype._validatePosition=function(t){var i;return(i=t<=this.minValue?this.minValue:t)>=this.maxValue?this.maxValue:i},t.prototype._validateDoublePosition=function(t,i){return"min"===t&&i>=this.maxPosition?this.maxPosition-this.stepValue:"max"===t&&i<=this.minPosition?this.minPosition+this.stepValue:i},t.prototype._equateValueToStep=function(t){return Math.round(t/this.stepValue)*this.stepValue||this.minValue},t}();!function(t){var i=function(t){this.presenter=new h(new a,new l),this.upgradeModelValues=this.presenter.init(t)};function e(t){return t.data("alexandr")}t.extend(i.prototype,{_initPlugin:function(e,n){var s=new i(n);return t(e).data("alexandr",s),t(e).data("alexandrOptions",t.extend(n,s.upgradeModelValues)),t(e)},_optionPlugin:function(i,e,n){var s,a=(i=t(i)).data("alexandrOptions");if(!e||"string"==typeof e&&null==n){var o=e;return(e=a||{})&&o?e[o]:e}"string"==typeof(e=e||{})&&((s={})[e]=n,e=s),this._refreshPlugin(i,t.extend(a,e))},_refreshPlugin:function(t,i){this._destroyPlugin(t),this._initPlugin(t,i)},_destroyPlugin:function(i){return(i=t(i)).removeData("alexandr").removeData("alexandrOptions"),i.find(".alexandr").remove(),i}}),t.fn.alexandr=function(n){var s=Array.prototype.slice.call(arguments,1);if(function(t,i){var e="option"===t,n=0===i.length,s=1===i.length&&"string"==typeof i[0];if(e&&(n||s))return!0}(n,s)){var a=t(this).data("alexandr");return a["_"+n+"Plugin"].apply(a,[this[0]].concat(s))}var o=t.extend({},t.fn.alexandr.defaults,n);return o.container=this,this.each((function(){if(function(t){return"string"==typeof t}(n)&&e(t(this))){var a=t(this).data("alexandr");if(!a["_"+n+"Plugin"])throw"Unknown method: "+n;a["_"+n+"Plugin"].apply(a,[this].concat(s))}else if(!e(t(this))){var h=new i(o);t(this).data("alexandr",h),t(this).data("alexandrOptions",t.extend(o,h.upgradeModelValues))}}))},t.fn.alexandr.defaults={minValue:1e3,maxValue:2e3,stepValue:10,showMinMaxValue:!0,orientation:"horizontal",type:"double",showValueFlag:!0,showRuler:!0,minPosition:10,maxPosition:20,elemForShowValueMin:t(".min"),elemForShowValueMax:t(".max"),lineClass:"",progressBarClass:"",thumbClass:"",thumbMinClass:"",thumbMaxClass:"",showMinValueClass:"",showMaxValueClass:"",controlsMinThumb:[],controlsMaxThumb:[],controlsStepValues:[]}}(jQuery)})();